<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.life.bank.palm.dao.trade.mapper.TradeRecordMapper">

    <insert id="insertSelective" parameterType="com.life.bank.palm.dao.trade.pojo.TradeRecordPO">
        insert into trade_record
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null">user_id,</if>
            <if test="tradeId != null">trade_id,</if>
            <if test="tradeType != null">trade_type,</if>
            <if test="tradeAmount != null">trade_amount,</if>
            <if test="tradeBalance != null">trade_balance,</if>
            <if test="tradeChannel != null">trade_channel,</if>
            <if test="tradeTime != null">trade_time,</if>
            <if test="tradeStatus != null">trade_status,</if>
            <if test="tradeDesc != null">trade_desc,</if>
            <if test="targetUserId != null">target_user_id,</if>
            <if test="targetCardId != null">target_card_id,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userId != null">#{userId},</if>
            <if test="tradeId != null">#{tradeId},</if>
            <if test="tradeType != null">#{tradeType},</if>
            <if test="tradeAmount != null">#{tradeAmount},</if>
            <if test="tradeBalance != null">#{tradeBalance},</if>
            <if test="tradeChannel != null">#{tradeChannel},</if>
            <if test="tradeTime != null">#{tradeTime},</if>
            <if test="tradeStatus != null">#{tradeStatus},</if>
            <if test="tradeDesc != null">#{tradeDesc},</if>
            <if test="targetUserId != null">#{targetUserId},</if>
            <if test="targetCardId != null">#{targetCardId},</if>
        </trim>
    </insert>

    <select id="selectByTradeId" resultType="com.life.bank.palm.dao.trade.pojo.TradeRecordPO">
        select * from trade_record
        where trade_id = #{tradeId} and is_delete = 0
    </select>

    <select id="selectByUserId" resultType="com.life.bank.palm.dao.trade.pojo.TradeRecordPO">
        select * from trade_record
        where user_id = #{userId} and is_delete = 0
        order by trade_time desc
            limit #{offset}, #{limit}
    </select>

    <update id="updateStatusByTradeId">
        update trade_record
        set trade_status = #{tradeStatus}
        where trade_id = #{tradeId}
    </update>
</mapper>